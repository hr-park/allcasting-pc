<!DOCTYPE html>
<html lang="ko">
<head>
	<meta charset="utf-8" />
	<meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1" />
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<title>All CASTING</title>
	<link rel="stylesheet" href="../static/css/NotoSansKR.css">
	<link rel="stylesheet" href="../static/css/style.css">
	<link rel="stylesheet" href="../static/css/swiper-bundle.min.css" />
    <link rel="stylesheet" href="../static/css/flatpickr.min.css">
	<script src="../static/js/swiper-bundle.min.js"></script>
	<script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>
	<script src="https://npmcdn.com/flatpickr/dist/l10n/ko.js"></script>
	<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
	<script src="../static/js/common.js"></script>
</head>
<body>
	<div class="wrap">
		<header class="header">
			<div class="inner">
				<div class="logo_wrap">
					<h1><a href="javascript:void(0)" class="logo"><img src="../static/images/logo.png" alt="ALLCASTING"></a></h1>
					<nav class="gnb">
						<a href="javascript:void(0)" class="active">í™ˆ</a>
						<a href="javascript://">ì˜¬ìº£ ì†Œê°œ</a>
						<a href="javascript://">ë‚´ ì¼ì •</a>
						<a href="javascript://">ê´€ì‹¬ ê³µê³ </a>
					</nav>	
				</div>
				<div class="header_actions">
					<a href="search.html" class="btn btn_search">ê²€ìƒ‰</a>
					<a href="javascript:void(0)" class="btn btn_notification"><span class="badge_alert">ìƒˆë¡œìš´ ì•Œë¦¼</span></a>
					<a href="javascript:void(0)" class="btn btn_profile">
						<span class="profile_img">
							<img src="../static/images/profile_sample.jpg" alt="í”„ë¡œí•„">
						</span>
						<span class="badge_alert">ìƒˆë¡œìš´ ì•Œë¦¼</span>
					</a>
				</div>
			</div>
		</header>
		<main class="profile">
			<div class="inner">
				<div class="section_title">
					<h2>í”„ë¡œí•„ ë“±ë¡ ë° ìˆ˜ì •</h2>
					<div class="desc_group">
						<p class="desc">ì´ˆì•ˆ ìƒíƒœì…ë‹ˆë‹¤. ì €ì¥ ì™„ë£Œì‹œ ë“±ë¡ë©ë‹ˆë‹¤.</p>
						<button type="button" class="btn_common secondary">ì´ˆì•ˆ ì‚­ì œ</button>
						<button type="button" class="btn_common primary">ì €ì¥í•˜ê¸°</button>
					</div>
				</div>
				<div class="profile_view profile_write">
					<div class="left">
						<div class="profile_box">
							<p class="tit">ì´ë¦„ ë° ê³µê°œë²”ìœ„</p>
							<div class="reg_form">
								<div class="inp_field">
									<label for="">í”„ë¡œí•„ ì´ë¦„</label>
									<div class="inp_box">
										<input type="text" id="" class="inp_txt" placeholder="ì´ í”„ë¡œí•„ì˜ ì´ë¦„ì„ ì‘ì„±í•´ ì£¼ì„¸ìš”."/>
										<span class="msg_desc">*í”„ë¡œí•„ ì´ë¦„ì€ ë³¸ì¸ì—ê²Œë§Œ ë³´ì—¬ì§‘ë‹ˆë‹¤.</span>
									</div>
								</div>
								<div class="inp_field">
									<label for="">ê³µê°œ ë²”ìœ„</label>
									<div class="inp_box">
										<span class="inp_radio">
											<input type="radio" id="all" name="visibility" checked>
											<label for="all">ì „ì²´ ê³µê°œ</label>
										</span>
										<span class="inp_radio">
											<input type="radio" id="creator" name="visibility" checked>
											<label for="creator">ì¼ë¶€(ì œì‘ì)ê³µê°œ</label>
										</span>
										<span class="inp_radio">
											<input type="radio" id="private" name="visibility" checked>
											<label for="private">ë¹„ê³µê°œ</label>
										</span>
									</div>
								</div>
								<div class="inp_field">
									<label for="">ëŒ€í‘œ í”„ë¡œí•„</label>
									<div class="inp_box">
										<div class="inp_checkbox">
											<input type="checkbox" id="chkProfileMain">
											<label for="chkProfileMain">ëŒ€í‘œ í”„ë¡œí•„ì…ë‹ˆë‹¤.</label>
										</div>
									</div>
								</div>
							</div>
						</div>
						<div class="profile_box">
							<p class="tit">ê¸°ë³¸ ì •ë³´</p>
							<div class="reg_form">
								<div class="inp_field">
									<label for="">ì´ë¦„</label>
									<div class="inp_box">
										<input type="text" id="" class="inp_txt" placeholder="ì•„í‹°ìŠ¤íŠ¸ë¡œì„œ í™œë™í•˜ëŠ” ì´ë¦„ì„ ì‘ì„±í•´ ì£¼ì„¸ìš”."/>
									</div>
								</div>
								<div class="inp_field">
									<label for="">ì—°ë ¹ëŒ€</label>
									<div class="inp_box">
										<input type="text" id="" class="inp_txt" placeholder="ì—°ê¸°ê°€ ê°€ëŠ¥í•œ ì—°ë ¹ëŒ€ë¥¼ ì‘ì„±í•´ ì£¼ì„¸ìš”."/>
										<span class="msg_desc">*ì˜ˆë¥¼ ë“¤ì–´ 10ëŒ€ ~ 30ëŒ€, 50ëŒ€~70ëŒ€ ë“±</span>
									</div>
								</div>
								<div class="inp_field">
									<label for="">ì„±ë³„</label>
									<div class="inp_box">
										<div class="row">
											<div class="inp_radio">
												<input type="radio" name="gender" id="gender1">
												<label for="gender1">ë‚¨ì„±</label>
											</div>
											<div class="inp_radio">
												<input type="radio" name="gender" id="gender2">
												<label for="gender2">ì—¬ì„±</label>
											</div>
											<div class="inp_radio">
												<input type="radio" name="gender" id="gender3">
												<label for="gender3">ê¸°íƒ€</label>
											</div>
										</div>
									</div>
								</div>
								<div class="inp_field">
									<label for="area">í™œë™ ì§€ì—­</label>
									<div class="inp_box">
										<input type="text" id="area" class="inp_txt" placeholder="í™œë™ ê°€ëŠ¥í•œ ì§€ì—­ì„ ì„ íƒí•´ ì£¼ì„¸ìš”." />
									</div>
								</div>
								<div class="inp_field">
									<label for="area">ì‹ ì²´ ì‚¬ì´ì¦ˆ <span class="lab_sub">*ì„ íƒ ì‚¬í•­</span></label>
									<div class="inp_box">
										<div class="row">
											<div class="col">
												<input type="text" id="" class="inp_txt num" oninput="chkNumber(this, 0)" pattern="[0-9]*" placeholder="í‚¤ ì…ë ¥"/>
												<span class="txt">cm</span>
											</div>
											<div class="col">
												<input type="text" id="" class="inp_txt num" oninput="chkNumber(this, 0)" pattern="[0-9]*" placeholder="ëª¸ë¬´ê²Œ ì…ë ¥"/>
												<span class="txt">kg</span>
											</div>
										</div>
									</div>
								</div>
								<div class="inp_field">
									<label for="">ìµœì¢…í•™ë ¥/êµìœ¡ <span class="lab_sub">*ì„ íƒ ì‚¬í•­</span></label>
									<div class="inp_box">
										<input type="text" id="" class="inp_txt" placeholder="ìµœì¢… í•™ë ¥/êµìœ¡ì„ ì…ë ¥í•´ ì£¼ì„¸ìš”." />
									</div>
								</div>
								<div class="inp_field">
									<label for="">ì—°ë½ì²˜ <span class="lab_sub">*ì„ íƒ ì‚¬í•­</span></label>
									<div class="inp_box">
										<input type="text" id="" class="inp_txt" placeholder="-ë¥¼ í¬í•¨í•˜ì—¬ ì…ë ¥í•´ ì£¼ì„¸ìš”." />
									</div>
								</div>
								<div class="inp_field">
									<label for="">íŠ¹ê¸° <span class="lab_sub">*ì„ íƒ ì‚¬í•­</span></label>
									<input type="hidden" value="" name="tag" id="rdTag" />
									<div class="inp_box">
										<div class="flex_gap10">
											<span class="txt">#</span>
											<input type="text" id="tag" size="7" class="inp_txt" placeholder="ììœ ë¡­ê²Œ ì…ë ¥í•´ ì£¼ì„¸ìš”."/>
										</div>
										<div id="tagSpecialtyList" class="tags"></div>
									</div>
								</div>
							</div>
						</div>
						<div class="profile_box">
							<p class="tit">ê¸°ë³¸ ì •ë³´</p>
							<div class="reg_form" id="careerForm">
								<div class="inp_field">
									<label>ì—°ë„</label>
									<div class="inp_box">
										<div class="custom_select min">
											<select id="yearSelect">
												<option value="">ì„ íƒ</option>
												<option value="2021">2021ë…„</option>
												<option value="2022">2022ë…„</option>
											</select>
										</div>
									</div>
								</div>
								<div class="inp_field">
									<label>ë§¤ì²´</label>
									<div class="inp_box">
										<div class="custom_select min">
											<select id="mediaSelect">
												<option value="">ì„ íƒ</option>
												<option value="TV ë“œë¼ë§ˆ">TV ë“œë¼ë§ˆ</option>
												<option value="ì˜í™”">ì˜í™”</option>
											</select>
										</div>
									</div>
								</div>
								<div class="inp_field">
									<label>ì‘í’ˆëª…</label>
									<div class="inp_box">
										<input type="text" id="workName" class="inp_txt" placeholder="ì‘í’ˆëª…ì„ ì‘ì„±í•´ ì£¼ì„¸ìš”.">
									</div>
								</div>
								<div class="inp_field">
									<label>ì—­í• </label>
									<div class="inp_box">
										<input type="text" id="roleName" class="inp_txt" placeholder="ì—­í• ì— ëŒ€í•œ ì„¤ëª…ì„ ì¨ì£¼ì„¸ìš”.">
										<span class="msg_desc">*ì˜ˆë¥¼ ë“¤ì–´ '40ëŒ€ ì‹±ê¸€íŒŒíŒŒë¡œ ë”¸ê³¼ ì•„ë“¤ì„ í˜¼ì í‚¤ì›€' ë“±</span>
									</div>
								</div>
								<div class="inp_field">
									<label>ëŒ€í‘œì‘ ì„¤ì •</label>
									<div class="inp_box">
										<div class="inp_checkbox">
											<input type="checkbox" id="chkWorkMain">
											<label for="chkWorkMain">ëŒ€í‘œ ì‘í’ˆì…ë‹ˆë‹¤.</label>
										</div>
										<button type="button" id="addCareerBtn" class="btn_round_add w_full"><span>ê²½ë ¥ ì¶”ê°€í•˜ê¸°</span></button>
										<!-- ê²½ë ¥ ëª©ë¡ì´ ì¶”ê°€ë  ì˜ì—­ -->
										<ul id="careerSummary" class="form_summary"></ul>
									</div>
								</div>
							</div>
						</div>
					</div>
					<div class="right">
						<div class="profile_box">
							<p class="tit">ì‚¬ì§„</p>
							<div class="reg_form">
								<div class="inp_field">
									<label for="">ëŒ€í‘œì‚¬ì§„</label>
									<div class="inp_box">
										<label class="photo main">
											<input type="file" accept="image/*" hidden>
										</label>
										<span class="msg_desc">*ëŒ€í‘œ ì‚¬ì§„ì€ ì–¼êµ´ê³¼ ê°€ìŠ´ ë˜ëŠ” ë°°ê¹Œì§€ ë‚˜ì˜¨ ìì‹ ì˜ ì–¼êµ´ì´ ì˜ ë³´ì´ëŠ” ì‚¬ì§„ì´ ì¢‹ìŠµë‹ˆë‹¤.</span>
									</div>
								</div>
								<div class="inp_field">
									<label for="">ì„œë¸Œì‚¬ì§„</label>
									<div class="inp_box">
										<div class="photo-list">
											<label class="photo sub">
												<input type="file" accept="image/*" hidden>
											</label>
											<label class="photo sub">
												<input type="file" accept="image/*" hidden>
											</label>
											<label class="photo sub">
												<input type="file" accept="image/*" hidden>
											</label>
										</div>
										<span class="msg_desc">*ì„œë¸Œ ì‚¬ì§„ì€ ìµœëŒ€ 50ì¥ê¹Œì§€ ë“±ë¡í•  ìˆ˜ ìˆìœ¼ë©° ìì‹ ì´ ë‹ë³´ì¼ ìˆ˜ ìˆëŠ” í¬ì¦ˆ ë˜ëŠ” ë§¡ì•˜ë˜ ì—­í• ì— ëŒ€í•´ ì–´í•„í•  ìˆ˜ ìˆëŠ” ì‚¬ì§„ì´ ì¢‹ìŠµë‹ˆë‹¤.</span>
									</div>
								</div>
							</div>
						</div>
						<div class="profile_box">
							<p class="tit">ì˜ìƒ</p>
							<div class="reg_form">
								<div class="inp_field">
									<label for="videoTitle">ì˜ìƒ ì œëª©</label>
									<div class="inp_box">
										<input type="text" id="videoTitle" class="inp_txt" placeholder="ì˜ìƒ ì œëª©ì„ ì…ë ¥í•´ ì£¼ì„¸ìš”." />
									</div>
								</div>
								<div class="inp_field">
									<label for="videoUrl">ìœ íŠœë¸Œ URL</label>
									<div class="inp_box">
										<input type="text" id="videoUrl" class="inp_txt" placeholder="ìœ íŠœë¸Œ URLì´ë‚˜ ì˜ìƒì˜ ë§í¬ë¥¼ ë„£ì–´ì£¼ì„¸ìš”." />
										<button id="addVideoBtn"class="btn_round_add w_full"><span>ì˜ìƒ ì¶”ê°€í•˜ê¸°</span></button>
										<ul id="videoSummary" class="form_summary"></ul>
									</div>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
		</main>

		<footer class="footer">
			<div class="inner">
				<div class="top">
					<div class="logo"><img src="../static/images/logo.png" alt="ALLCASTING"></div>
					<div class="btns">
						<button type="button" class="ft_pill">ì•„í‹°ìŠ¤íŠ¸ë¥¼ ì°¾ëŠ”ë‹¤ë©´?</button>
						<button type="button" class="ft_pill">í”„ë¡œì íŠ¸ë¥¼ ì°¾ëŠ”ë‹¤ë©´?</button>
						<button type="button" class="ft_sns insta">instagram</button>
						<button type="button" class="ft_sns youtube">instagram</youtube>
					</div>
				</div>
				<div class="legal">
					<p class="row">Copyright Â© 2025 ALLCASTING. All rights reserved.</p>
					<p class="row">(ì£¼)ì˜¬ìº£ Â· ëŒ€í‘œì: í™ê¸¸ë™ Â· ì‚¬ì—…ìë“±ë¡ë²ˆí˜¸: 111-22-3333 Â· í†µì‹ íŒë§¤ì—… ì‹ ê³ ë²ˆí˜¸: 2025-ì„œìš¸ê°•ë‚¨-01010101</p>
					<p class="row">ì‚¬ì—…ì¥ ì†Œì¬ì§€: ì„œìš¸íŠ¹ë³„ì‹œ ê°•ë‚¨êµ¬ ì—¬ê¸°ì—¬ê¸° ì£¼ì†Œê°€ ë“¤ì–´ê°‘ë‹ˆë‹¤.</p>
					<p class="row links"><a href="javascript://">ì´ìš©ì•½ê´€</a> &middot; <a href="javascript://">ê°œì¸ì •ë³´ì²˜ë¦¬ë°©ì¹¨</a></p>
				</div>
			</div>
		</footer>
	</div>

	<!-- ì´ë¯¸ì§€ ìë¥´ê¸° íŒì—… -->
	<div id="pop_crop" class="popup_overlay">
		<div class="popup popup_confirm">
			<div class="popup_header">
			<h3 class="popup_title">ì´ë¯¸ì§€ ìë¥´ê¸°</h3>
			<button type="button" class="btn_close" onclick="closePopup('pop_crop')">
				<span class="blind">ë‹«ê¸°</span>
			</button>
			</div>

			<div class="popup_content">
				<div class="crop_area">
					<img id="cropPreview" src="" alt="Preview">
				</div>
				<p class="popup_msg">ì¸ë„¤ì¼ ê·œê²©ì— ë§ê²Œ í¬ë¡­ë˜ë‹ˆ ì–¼êµ´ì´ ì¤‘ì•™ì— ìœ„ì¹˜í•˜ë„ë¡ í•´ì£¼ì„¸ìš”.</p>
			</div>
			<div class="popup_footer">
			<button type="button" class="btn_common secondary" onclick="closePopup('pop_crop')">ì·¨ì†Œ</button>
			<button type="button" class="btn_common primary" id="btnCropDone">ì™„ë£Œ</button>
			</div>
		</div>
	</div>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/cropperjs/1.5.13/cropper.min.js"></script>
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/cropperjs/1.5.13/cropper.min.css" />

	<script>
	//TAG
	const tag = {};
	let counter = 0;

	const addTag = (value) => {
		tag[counter] = value;
		counter++;
	};

	const marginTag = () => Object.values(tag).filter(word => word !== "");

	document.getElementById('tag').addEventListener('keypress', (e) => {
		const self = e.target;

		if (e.key === 'Enter' || e.keyCode === 32) {
			const tagValue = self.value; 

			//í•´ì‹œíƒœê·¸ ê°’ì´ ì—†ìœ¼ë©´ ì‹¤í–‰X
			if (tagValue !== '') {
				//ì¤‘ë³µ íƒœê·¸ í™•ì¸
				const result = Object.values(tag).filter(word => word === tagValue);
				
				//ì¤‘ë³µ íƒœê·¸ê°€ ì—†ìœ¼ë©´ ì‹¤í–‰
				if (result.length === 0) { 
					const tagListSpecialty = document.getElementById('tagSpecialtyList');
					const span = document.createElement('span');
					span.classList.add('tag');
					span.innerHTML = `#${tagValue}<span class='btn_del' idx='${counter}'>íƒœê·¸ì‚­ì œ</span>`;
					tagListSpecialty.appendChild(span);
					addTag(tagValue);
					self.value = '';
				} else {
					alert('íŠ¹ê¸°ê°€ ì¤‘ë³µë©ë‹ˆë‹¤.');
				}
			}
			e.preventDefault(); //ìŠ¤í˜ì´ìŠ¤ë°” ì‹œ ë¹ˆ ê³µê°„ì´ ìƒê¸°ì§€ ì•Šë„ë¡ ë°©ì§€
		}
	});

	//ì¸ë±ìŠ¤ ê²€ì‚¬ í›„ ì‚­ì œ
    document.addEventListener('click', (e) => {
        if (e.target.classList.contains('btn_del')) {
            const index = e.target.getAttribute('idx');
            tag[index] = '';
            e.target.parentElement.remove();
        }
    });

/*
	document.querySelectorAll('.photo input').forEach(input=>{
	input.addEventListener('change', e=>{
		const file=e.target.files[0];
		const label=e.target.closest('.photo');
		if(file){
		const url=URL.createObjectURL(file);
		label.style.backgroundImage=`url(${url})`;
		label.style.backgroundSize='cover';
		label.style.backgroundPosition='center';
		label.classList.add('has-image');
		label.textContent='';
		if(!label.querySelector('.remove-btn')){
			const btn=document.createElement('button');
			btn.className='remove-btn';
			btn.textContent='Ã—';
			btn.addEventListener('click', ev=>{
			ev.stopPropagation();
			label.style.backgroundImage='';
			label.classList.remove('has-image');
			e.target.value='';
			btn.remove();
			});
			label.appendChild(btn);
		}
		}
	});
	});
*/

	//ì‘í’ˆ ì¶”ê°€	
	document.getElementById("addCareerBtn").addEventListener("click", function() {
		const year = document.getElementById("yearSelect").value;
		const media = document.getElementById("mediaSelect").value;
		const work = document.getElementById("workName").value.trim();
		const role = document.getElementById("roleName").value.trim();
		const isMain = document.getElementById("chkWorkMain").checked;
		
		// ì‘í’ˆëª… í•„ìˆ˜ ì…ë ¥ ê²€ì‚¬
		if (work === "") {
			alert("ì‘í’ˆëª…ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.");
			return;
		}

		// ê²½ë ¥ ë°•ìŠ¤ ìƒì„±
		const list = document.getElementById("careerSummary");
		const count = careerSummary.children.length + 1;

		const li = document.createElement("li");
		li.classList.add("item");
		li.innerHTML = `
			<strong class="num">ê²½ë ¥ ${count}.</strong>
			<p class="subject">${work}</p>
			<div class="btns flex_gap10">
				<button class="btn_action btn_del">ì‚­ì œ</button>
				<button class="btn_action btn_edit">ìˆ˜ì •</button>
			</div>
		`;

		list.appendChild(li);

		// í¼ ë¦¬ì…‹
		document.getElementById("yearSelect").selectedIndex = 0;
		document.getElementById("mediaSelect").selectedIndex = 0;
		document.getElementById("workName").value = "";
		document.getElementById("roleName").value = "";
		document.getElementById("chkWorkMain").checked = false;

		// ì‚­ì œ ë²„íŠ¼ ê¸°ëŠ¥
		li.querySelector(".btn_del").addEventListener("click", () => {
			li.remove();
		});
	});

	//ì˜ìƒì¶”ê°€
	document.getElementById('addVideoBtn').addEventListener('click', function (e) {
		e.preventDefault();

		const title = document.getElementById('videoTitle').value.trim();
		const url = document.getElementById('videoUrl').value.trim();
		const list = document.getElementById('videoSummary');
		const count = list.children.length + 1;

		if (!title) return alert('ì˜ìƒ ì œëª©ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.');
		if (!url) return alert('ìœ íŠœë¸Œ URLì„ ì…ë ¥í•´ì£¼ì„¸ìš”.');

		// ê¸°ë³¸ ì¸ë„¤ì¼ (URL ì²´í¬ ì—†ì´)
		const thumbnail = `/static/images/video_sample1.jpg`;
		const li = document.createElement('li');

		li.classList.add('item');
		li.classList.add('video');
		li.innerHTML = `
			<div class="video_img">
				<img src="${thumbnail}" alt="ì˜ìƒ ì¸ë„¤ì¼" class="thumb">
				<span class="duration">00:15</span>
			</div>
			<div>
				<strong class="num">ì˜ìƒ ${count}.</strong>
				<p class="subject">${title}</p>
				<div class="btns flex_gap10">
					<button class="btn_action btn_del">ì‚­ì œ</button>
					<button class="btn_action btn_edit">ìˆ˜ì •</button>
				</div>
			</div>
		`;
		list.appendChild(li);

		// ì…ë ¥ ë¦¬ì…‹
		document.getElementById('videoTitle').value = '';
		document.getElementById('videoUrl').value = '';
		});





		/* ============================================
		ğŸ“¸ ì´ë¯¸ì§€ ì—…ë¡œë“œ + ìë¥´ê¸° íŒì—… + ë¯¸ë¦¬ë³´ê¸° + ì„œë¸Œì‚¬ì§„ ìë™ ì¶”ê°€
		============================================ */
		document.addEventListener('DOMContentLoaded', () => {
			let currentInput = null;
			let cropper = null;

			// âœ… íŒŒì¼ ì„ íƒ ì‹œ íŒì—… ì—´ê¸°
			function openCropPopup(e) {
				currentInput = e.target;
				const file = e.target.files[0];
				if (!file) return;

				const img = document.getElementById('cropPreview');
				img.src = URL.createObjectURL(file);

				// íŒì—… ì—´ê¸°
				openPopup('pop_crop');

				// ì´ë¯¸ì§€ ë¡œë“œ í›„ cropper ìƒì„±
				img.onload = () => {
				if (cropper) cropper.destroy(); // ê¸°ì¡´ cropper ì œê±°
				cropper = new Cropper(img, {
					aspectRatio: 1, // ì •ì‚¬ê°í˜• ë¹„ìœ¨
					viewMode: 1,
					autoCropArea: 1,
					responsive: true,
					background: false
				});
				};
			}

			// âœ… "ë“±ë¡í•˜ê¸°" ë²„íŠ¼ í´ë¦­ ì‹œ ì˜ë¼ë‚´ê¸°
			function handleCroppedImage() {
				if (!cropper || !currentInput) return;

				cropper.getCroppedCanvas().toBlob(blob => {
				const croppedUrl = URL.createObjectURL(blob);
				const label = currentInput.closest('.photo');
				if (!label) return console.warn('.photo ë¶€ëª¨ ìš”ì†Œë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.');

				// ë°°ê²½ ì´ë¯¸ì§€ë¡œ ì ìš©
				label.style.backgroundImage = `url(${croppedUrl})`;
				label.style.backgroundSize = 'cover';
				label.style.backgroundPosition = 'center';
				label.classList.add('has-image');
				label.textContent = '';

				// âœ… ì„œë¸Œì‚¬ì§„ì´ë©´ ìë™ ì¶”ê°€ (ê¸°ë³¸ 3ê°œ ë‹¤ ì°¼ì„ ë•Œë§Œ)
				if (label.classList.contains('sub')) {
					const list = label.closest('.photo-list');
					const subs = Array.from(list.querySelectorAll('.photo.sub'));
					const filled = subs.filter(sub => sub.classList.contains('has-image')).length;

					// ëª¨ë“  ì„œë¸Œì‚¬ì§„ì´ ì±„ì›Œì¡Œê³ , 50ê°œ ë¯¸ë§Œì¼ ë•Œë§Œ ì¶”ê°€
					if (filled === subs.length && subs.length < 50) {
						const newLabel = document.createElement('label');
						newLabel.className = 'photo sub';
						newLabel.innerHTML = `<input type="file" accept="image/*" hidden>`;
						newLabel.querySelector('input').addEventListener('change', openCropPopup);
						list.appendChild(newLabel);
					}
				}

				closePopup('pop_crop');
				cropper.destroy();
				cropper = null;
				currentInput = null;
				});
			}

			// âœ… ì´ë²¤íŠ¸ ì—°ê²°
			document.querySelectorAll('.photo input[type="file"]').forEach(input => {
				input.addEventListener('change', openCropPopup);
			});

			const btnCropDone = document.getElementById('btnCropDone');
			if (btnCropDone) btnCropDone.addEventListener('click', handleCroppedImage);
			});



	</script>
</body>
</html>
