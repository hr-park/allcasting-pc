<!DOCTYPE html>
<html lang="ko">
<head>
	<meta charset="utf-8" />
	<meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1" />
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<title>All CASTING</title>
	<link rel="stylesheet" href="../static/css/NotoSansKR.css">
	<link rel="stylesheet" href="../static/css/style.css">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@12/swiper-bundle.min.css" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css">
	<script src="https://cdn.jsdelivr.net/npm/swiper@12/swiper-bundle.min.js"></script>
	<script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>
	<script src="https://npmcdn.com/flatpickr/dist/l10n/ko.js"></script>
	<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
	<script src="../static/js/common.js"></script>
</head>
<body>
	<div class="wrap">
		<header class="header">
			<div class="inner">
				<div class="logo_wrap">
					<h1><a href="javascript:void(0)" class="logo"><img src="../static/images/logo.png" alt="ALLCASTING"></a></h1>
					<!-- Caster GNB -->
					<nav class="gnb">
						<a href="index_caster.html">í™ˆ</a>
						<a href="project_list.html" class="active">ë‚´ í”„ë¡œì íŠ¸</a>
						<a href="review_mng_list.html">ì‹¬ì‚¬ ê´€ë¦¬</a>
						<a href="javascript://">ì˜¤ë””ì…˜ ì¼ì •</a>
						<a href="artist_list.html">ê´€ì‹¬ ì•„í‹°ìŠ¤íŠ¸</a>
					</nav>
					<!--// Caster GNB -->
				</div>
				<div class="header_actions">
					<a href="search.html" class="btn btn_search">ê²€ìƒ‰</a>
					<a href="javascript:void(0)" class="btn btn_notification"><span class="badge_alert">ìƒˆë¡œìš´ ì•Œë¦¼</span></a>
					<a href="javascript:void(0)" class="btn btn_profile">
						<span class="profile_img">
							<img src="../static/images/profile_sample.jpg" alt="í”„ë¡œí•„">
						</span>
						<span class="badge_alert">ìƒˆë¡œìš´ ì•Œë¦¼</span>
					</a>
				</div>
			</div>
		</header>
		<main class="profile">
			<div class="inner">
				<div class="section_title">
					<h2>í”„ë¡œì íŠ¸ ë“±ë¡ ë° ìˆ˜ì •</h2>
					<div class="desc_group">
						<p class="desc">ì´ˆì•ˆ ìƒíƒœì…ë‹ˆë‹¤. ì €ì¥ ì™„ë£Œì‹œ ë“±ë¡ë©ë‹ˆë‹¤.</p>
						<button type="button" class="btn_common secondary">ì´ˆì•ˆ ì‚­ì œ</button>
						<button type="button" class="btn_common primary">ì €ì¥í•˜ê¸°</button>
					</div>
				</div>
				<div class="profile_view profile_write">
					<div class="left">
						<div class="profile_box">
								<p class="tit">ì´ë¦„ ë° ê³µê°œë²”ìœ„</p>
								<div class="reg_form">
								<div class="inp_field">
									<label for="">í”„ë¡œì íŠ¸ëª…</label>
									<div class="inp_box">
										<input type="text" id="" class="inp_txt" placeholder="ëª¨ì§‘ ê³µê³ ì— ë“±ë¡ë  ì œëª©ì„ ì ì–´ì£¼ì„¸ìš”."/>
									</div>
								</div>
								<script>
document.addEventListener("DOMContentLoaded", function () {
  flatpickr(".date_range", {
    mode: "range",                // âœ… 2ê°œ ë‚ ì§œ ì„ íƒ
    dateFormat: "Y-m-d",          // í‘œì‹œ í˜•ì‹
    locale: "ko",                 // í•œêµ­ì–´ ì§€ì›
    allowInput: true,
    onClose: function (selectedDates, dateStr, instance) {
      console.log("ì„ íƒëœ ë‚ ì§œ:", dateStr); // ì˜ˆ: 2025-10-01 to 2025-10-10
    }
  });
});
									</script>
								<div class="inp_field">
									<label for="">ëª¨ì§‘ ê¸°ê°„</label>
									<div class="inp_box">
										<input type="text" id="" class="inp_txt date_range" placeholder="ì§€ì›ê°€ëŠ¥í•œ ê¸°ê°„ì„ ì„ íƒí•´ì£¼ì„¸ìš”." />
										<span class="msg_desc">*ì§€ì› ì‹œì‘ì¼ê³¼ ì¢…ë£Œì¼ 2ê°œ ì„ íƒ.</span>
									</div>
								</div>
								<div class="inp_field">
									<label for="">ê°ë… ë° ì œì‘ì‚¬</label>
									<div class="inp_box">
										<div class="row">
											<input type="text" id="" class="inp_txt" placeholder="ê°ë…ëª…" />
											<input type="text" id="" class="inp_txt" placeholder="ì œì‘ì‚¬ëª…" />
										</div>
									</div>
								</div>
								<div class="inp_field">
									<label>ë§¤ì²´</label>
									<div class="inp_box">
										<div class="custom_select min">
											<select id="midea">
												<option value="" selected disabled>ëŒ€ë¶„ë¥˜</option>
												<option>ì˜í™”</option>
												<option>TV</option>
												<option>ë¬´ëŒ€</option>
												<option>ì˜¨ë¼ì¸</option>
												<option>ê´‘ê³ </option>
												<option>ê¸°íƒ€ ê²½ë ¥</option>
											</select>
										</div>
									</div>
								</div>
								<div class="inp_field">
									<label>ì¥ë¥´ <span class="msg_desc">*ì„ íƒ ì‚¬í•­</span></label>
									<div class="inp_box">
										<div class="custom_select min">
											<select id="genre" data-max="3">
												<option value="" selected disabled>ì¥ë¥´ì„ íƒ, ìµœëŒ€ 3ê°œ</option>
												<option value="ë“œë¼ë§ˆ">ë“œë¼ë§ˆ</option>
												<option value="ì•¡ì…˜">ì•¡ì…˜</option>
												<option value="ìŠ¤ë¦´ëŸ¬">ìŠ¤ë¦´ëŸ¬</option>
												<option value="ê³µí¬">ê³µí¬</option>
												<option value="ë²”ì£„">ë²”ì£„</option>
												<option value="íŒíƒ€ì§€">íŒíƒ€ì§€</option>
												<option value="ì›¨ìŠ¤í„´">ì›¨ìŠ¤í„´</option>
												<option value="ì• ë‹ˆë©”ì´ì…˜">ì• ë‹ˆë©”ì´ì…˜</option>
												<option value="ì½”ë¯¸ë””">ì½”ë¯¸ë””</option>
												<option value="ì „ìŸ">ì „ìŸ</option>
												<option value="ë¡œë§¨ìŠ¤">ë¡œë§¨ìŠ¤</option>
												<option value="ë¯¸ìŠ¤í„°ë¦¬">ë¯¸ìŠ¤í„°ë¦¬</option>
												<option value="ì–´ë“œë²¤ì²˜">ì–´ë“œë²¤ì²˜</option>
												<option value="ê°€ì¡±">ê°€ì¡±</option>
												<option value="SF">SF</option>
												<option value="ì—­ì‚¬/ì‚¬ê·¹">ì—­ì‚¬/ì‚¬ê·¹</option>
												<option value="ë‹¤íë©˜í„°ë¦¬">ë‹¤íë©˜í„°ë¦¬</option>
											</select>
										</div>
										<div class="tags"></div>
									</div>
								</div>
								<div class="inp_field">
									<label>ì‘í’ˆ ì„¤ëª… <p class="txt_counter"><span class="counter">0</span>/1,000</p></label>
									<div class="inp_box">
										<textarea id="" class="inp_textarea" placeholder="ì‘í’ˆ ì„¤ëª…ì„ ì‘ì„±í•´ì£¼ì„¸ìš”."></textarea>
									</div>
								</div>
								<div class="inp_field">
									<label>ì‘í’ˆ ì´ë¯¸ì§€ <span class="msg_desc">*ì„ íƒ ì‚¬í•­</span></label>
									<div class="inp_box">
										<label class="photo project">
											<input type="file" accept="image/*" hidden="">
										</label>
										<p class="msg_desc">*ì‘í’ˆ ì„¤ëª… ì˜ì—­ì— í‘œì‹œí•  ëŒ€í‘œ ì´ë¯¸ì§€ë¥¼ ì¶”ê°€í•´ë³´ì„¸ìš”.</p>
									</div>
								</div>
								<div class="inp_field">
									<label>ì´¬ì˜ ê¸°ê°„</label>
									<div class="inp_box">
										<input type="text" id="" class="inp_txt date_range" placeholder="ì´¬ì˜ì˜ˆì • ê¸°ê°„ì„ ì„ íƒí•˜ì„¸ìš”." />
										<span class="msg_desc">*ì´¬ì˜ ì‹œì‘ì¼ê³¼ ì¢…ë£Œì¼ 2ê°œ ì„ íƒ.</span>
									</div>
								</div>
								<div class="inp_field">
									<label>ì´¬ì˜ ì§€ì—­</label>
									<div class="inp_box">
										<div class="custom_select min">
											<select id="region" data-max="3">
												<option value="" selected disabled>ì§€ì—­ ì„ íƒ, ìµœëŒ€ 3ê°œ</option>
												<option value="êµ­ë‚´ ì „ì²´">êµ­ë‚´ ì „ì²´</option>
												<option value="ì„œìš¸">ì„œìš¸</option>
												<option value="ê²½ê¸°">ê²½ê¸°</option>
												<option value="ì¸ì²œ">ì¸ì²œ</option>
												<option value="ë¶€ì‚°">ë¶€ì‚°</option>
												<option value="ëŒ€êµ¬">ëŒ€êµ¬</option>
												<option value="ëŒ€ì „">ëŒ€ì „</option>
												<option value="ìš¸ì‚°">ìš¸ì‚°</option>
												<option value="ì„¸ì¢…">ì„¸ì¢…</option>
												<option value="ê°•ì›">ê°•ì›</option>
												<option value="ì¶©ë‚¨">ì¶©ë‚¨</option>
												<option value="ì¶©ë¶">ì¶©ë¶</option>
												<option value="ì „ë‚¨">ì „ë‚¨</option>
												<option value="ì „ë¶">ì „ë¶</option>
												<option value="ê²½ë‚¨">ê²½ë‚¨</option>
												<option value="ê²½ë¶">ê²½ë¶</option>
											</select>
										</div>
										<div class="tags"></div>
									</div>
								</div>
								<div class="inp_field">
									<label>í•™ìƒì‘í’ˆ</label>
									<div class="inp_box">
										<div class="inp_checkbox">
											<input type="checkbox" id="chkStudentWork">
											<label for="chkStudentWork">í•™ìƒ ì‘í’ˆì…ë‹ˆë‹¤.</label>
										</div>
									</div>
								</div>
							</div>
						</div>
					</div>
					<div class="right">
						<div class="profile_box">
							<p class="tit">ëª¨ì§‘ ì—­í• </p>
							<form class="reg_form" id="recruitRoleForm">
								<div class="inp_field">
									<label>ì—­í•  êµ¬ë¶„</label>
									<div class="inp_box">
										<div class="custom_select min">
											<select id="role">
												<option value="" selected disabled>ë¹„ì¤‘ì´ë‚˜ ìœ í˜•ì„ íƒ</option>
												<option value="ì£¼ì—°">ì£¼ì—°</option>
												<option value="ì¡°ì—°">ì¡°ì—°</option>
												<option value="ë‹¨ì—­">ë‹¨ì—­</option>
												<option value="ë³´ì¡°ì¶œì—°">ë³´ì¡°ì¶œì—°</option>
												<option value="ëª¨ë¸">ëª¨ë¸</option>
											</select>
										</div>
									</div>
								</div>
								<div class="inp_field">
									<label>ì„±ë³„</label>
									<div class="inp_box">
										<div class="row">
											<div class="inp_checkbox">
												<input type="checkbox" name="gender" id="gender1">
												<label for="gender1">ë‚¨ì„±</label>
											</div>
											<div class="inp_checkbox">
												<input type="checkbox" name="gender" id="gender2">
												<label for="gender2">ì—¬ì„±</label>
											</div>
											<div class="inp_checkbox">
												<input type="checkbox" name="gender" id="gender3">
												<label for="gender3">ê¸°íƒ€</label>
											</div>
										</div>
									</div>
								</div>
								<div class="inp_field">
									<label for="ageRange">ë‚˜ì´</label>
									<div class="inp_box">
										<input type="text" id="ageRange" class="inp_txt" placeholder="ì—­í• ì˜ ë‚˜ì´ë¥¼ ì…ë ¥í•´ ì£¼ì„¸ìš”.">
									</div>
								</div>
								<div class="inp_field">
									<label>ëª¨ì§‘ ì¸ì›</label>
									<div class="inp_box">
										<div class="custom_select min">
											<select id="recruitCount">
												<option value="" selected disabled>ëª¨ì§‘ ì¸ì› ì„ íƒ</option>
												<option value="1">1</option>
											</select>
										</div>
									</div>
								</div>
								<div class="inp_field">
									<label>ì—­í•  ì´ë¦„</label>
									<div class="inp_box">
										<input type="text" id="roleName" class="inp_txt" placeholder="ì—­í• ì˜ ì´ë¦„ì„ ì…ë ¥í•´ ì£¼ì„¸ìš”.">
									</div>
								</div>
								<div class="inp_field">
									<label>ì—­í•  ì„¤ëª… <p class="txt_counter"><span id="recruitTxtCount" class="counter">0</span>/1,000</p></label>
									<div class="inp_box">
										<textarea id="roleDesc" class="inp_textarea" placeholder="ì—­í•  ì„¤ëª…ì„ ì‘ì„±í•´ì£¼ì„¸ìš”."></textarea>
										<div class="inp_checkbox">
											<input type="checkbox" id="chkNudity">
											<label for="chkNudity">ë…¸ì¶œì—°ê¸° ìˆìŒ</label>
										</div>
									</div>
								</div>
								<div class="inp_field">
									<label for="tagSpecialty">í•„ìš” íŠ¹ê¸° <span class="lab_sub">*ì„ íƒ ì‚¬í•­</span></label>
									<input type="hidden" value="" name="tag" id="rdTag">
									<div class="inp_box">
										<div class="flex_gap10">
											<span class="txt">#</span>
											<input type="text" id="tagSpecialty" class="inp_txt" placeholder="ììœ ë¡­ê²Œ ì…ë ¥í•´ ì£¼ì„¸ìš”.">
										</div>
										<div id="tagSpecialtyList" class="tags"></div>
									</div>
								</div>
								<div class="inp_field">
									<label for="">ì¶œì—°ë£Œ</label>
									<div class="inp_box">
										<div class="custom_select min">
											<select id="pay">
												<option value="" selected disabled>ì‘í’ˆë‹¹</option>
												<option value="100">100</option>
											</select>
										</div>
										<div class="row">
											<div class="col">
												<input type="text" id="payMin" class="inp_txt" oninput="chkNumber(this, 0)" pattern="[0-9]*" placeholder="ìµœì†Œ ì¶œì—°ë£Œ">
											</div>
											ë¶€í„°
											<div class="col">
												<input type="text" id="payMax" class="inp_txt" oninput="chkNumber(this, 0)" pattern="[0-9]*" placeholder="ìµœëŒ€ ì¶œì—°ë£Œ">
											</div>
										</div>
										<div class="inp_checkbox">
											<input type="checkbox" id="chkNegotiable">
											<label for="chkNegotiable">í˜‘ì˜ í›„ ê²°ì •</label>
										</div>
										<div class="inp_checkbox">
											<input type="checkbox" id="chkUnpaid">
											<label for="chkUnpaid">ë¬´ê¸‰</label>
										</div>
										<button type="button" id="addRoleBtn" class="btn_round_add w_full"><span>ëª¨ì§‘ ì—­í•  ì¶”ê°€í•˜ê¸°</span></button>
										<!-- ì—­í•  ëª¨ì§‘ ëª©ë¡ì´ ì¶”ê°€ë  ì˜ì—­ -->
										<ul id="roleSummary" class="form_summary casting_cards_list">
											
										</ul>
									</div>
								</div>
							</form>
						</div>
					</div>
				</div>
			</div>
		</main>

		<footer class="footer">
			<div class="inner">
				<div class="top">
					<div class="logo"><img src="../static/images/logo.png" alt="ALLCASTING"></div>
					<div class="btns">
						<button type="button" class="ft_pill">ì•„í‹°ìŠ¤íŠ¸ë¥¼ ì°¾ëŠ”ë‹¤ë©´?</button>
						<button type="button" class="ft_pill">í”„ë¡œì íŠ¸ë¥¼ ì°¾ëŠ”ë‹¤ë©´?</button>
						<button type="button" class="ft_sns insta">instagram</button>
						<button type="button" class="ft_sns youtube">instagram</youtube>
					</div>
				</div>
				<div class="legal">
					<p class="row">Copyright Â© 2025 ALLCASTING. All rights reserved.</p>
					<p class="row">(ì£¼)ì˜¬ìº£ Â· ëŒ€í‘œì: í™ê¸¸ë™ Â· ì‚¬ì—…ìë“±ë¡ë²ˆí˜¸: 111-22-3333 Â· í†µì‹ íŒë§¤ì—… ì‹ ê³ ë²ˆí˜¸: 2025-ì„œìš¸ê°•ë‚¨-01010101</p>
					<p class="row">ì‚¬ì—…ì¥ ì†Œì¬ì§€: ì„œìš¸íŠ¹ë³„ì‹œ ê°•ë‚¨êµ¬ ì—¬ê¸°ì—¬ê¸° ì£¼ì†Œê°€ ë“¤ì–´ê°‘ë‹ˆë‹¤.</p>
					<p class="row links"><a href="javascript://">ì´ìš©ì•½ê´€</a> &middot; <a href="javascript://">ê°œì¸ì •ë³´ì²˜ë¦¬ë°©ì¹¨</a></p>
				</div>
			</div>
		</footer>
	</div>

	<!-- ì´ë¯¸ì§€ ìë¥´ê¸° íŒì—… -->
	<div id="pop_crop" class="popup_overlay">
		<div class="popup popup_confirm">
			<div class="popup_header">
			<h3 class="popup_title">ì´ë¯¸ì§€ ìë¥´ê¸°</h3>
			<button type="button" class="btn_close" onclick="closePopup('pop_crop')">
				<span class="blind">ë‹«ê¸°</span>
			</button>
			</div>

			<div class="popup_content">
				<div class="crop_area">
					<img id="cropPreview" src="" alt="Preview">
				</div>
				<p class="popup_msg">ì¸ë„¤ì¼ ê·œê²©ì— ë§ê²Œ í¬ë¡­ë˜ë‹ˆ ì–¼êµ´ì´ ì¤‘ì•™ì— ìœ„ì¹˜í•˜ë„ë¡ í•´ì£¼ì„¸ìš”.</p>
			</div>
			<div class="popup_footer">
			<button type="button" class="btn_common secondary" onclick="closePopup('pop_crop')">ì·¨ì†Œ</button>
			<button type="button" class="btn_common primary" id="btnCropDone">ì™„ë£Œ</button>
			</div>
		</div>
	</div>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/cropperjs/1.5.13/cropper.min.js"></script>
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/cropperjs/1.5.13/cropper.min.css" />

	<script>
	//ê¸€ììˆ˜ ì¹´ìš´íŠ¸
	document.addEventListener("DOMContentLoaded", function() {
		const textareas = document.querySelectorAll('textarea');
		textareas.forEach((textarea) => {
			textarea.addEventListener('input', function() {
			const field = textarea.closest('.inp_field');
			const counter = field.querySelector('.counter');
			const maxLength = 1000;
			
			if (textarea.value.length > maxLength) {
				textarea.value = textarea.value.substring(0, maxLength); // 1000ìê¹Œì§€ë§Œ ìœ ì§€
			}

			if (counter) {
				counter.textContent = textarea.value.length; // í˜„ì¬ ê¸€ììˆ˜ í‘œì‹œ
			}
			});
		});
	});
	
	//TAG
	const tag = {};
	let counter = 0;

	const addTag = (value) => {
		tag[counter] = value;
		counter++;
	};

	const marginTag = () => Object.values(tag).filter(word => word !== "");

	document.getElementById('tagSpecialty').addEventListener('keypress', (e) => {
		const self = e.target;

		if (e.key === 'Enter' || e.keyCode === 32) {
			const tagValue = self.value; 

			//í•´ì‹œíƒœê·¸ ê°’ì´ ì—†ìœ¼ë©´ ì‹¤í–‰X
			if (tagValue !== '') {
				//ì¤‘ë³µ íƒœê·¸ í™•ì¸
				const result = Object.values(tag).filter(word => word === tagValue);
				
				//ì¤‘ë³µ íƒœê·¸ê°€ ì—†ìœ¼ë©´ ì‹¤í–‰
				if (result.length === 0) { 
					const tagListSpecialty = document.getElementById('tagSpecialtyList');
					const span = document.createElement('span');
					span.classList.add('tag');
					span.innerHTML = `#${tagValue}<span class='btn_del' idx='${counter}'>íƒœê·¸ì‚­ì œ</span>`;
					tagListSpecialty.appendChild(span);
					addTag(tagValue);
					self.value = '';
				} else {
					swalConfirmPopup("íŠ¹ê¸°ê°€ ì¤‘ë³µë©ë‹ˆë‹¤.");
					return;
				}
			}
			e.preventDefault(); //ìŠ¤í˜ì´ìŠ¤ë°” ì‹œ ë¹ˆ ê³µê°„ì´ ìƒê¸°ì§€ ì•Šë„ë¡ ë°©ì§€
		}
	});

	//ì¸ë±ìŠ¤ ê²€ì‚¬ í›„ ì‚­ì œ
    document.addEventListener('click', (e) => {
        if (e.target.classList.contains('btn_del')) {
            const index = e.target.getAttribute('idx');
            tag[index] = '';
            e.target.parentElement.remove();
        }
    });

	
	// ëª¨ì§‘ ì—­í•  ì¶”ê°€
	document.getElementById("addRoleBtn").addEventListener("click", function () {
		const roleType = document.getElementById("roleType").value.trim();
		const genderEls = document.querySelectorAll('input[name="gender"]:checked');
		const genders = Array.from(genderEls).map(el => el.nextElementSibling.textContent).join(', ');
		const age = document.getElementById("ageRange").value.trim();
		const recruitCount = document.getElementById("recruitCount").value.trim();
		const roleName = document.getElementById("roleName").value.trim();
		const desc = document.getElementById("roleDesc").value.trim();
		const tags = Array.from(document.querySelectorAll("#tagSpecialtyList .tag"))
						.map(tag => tag.textContent.replace('íƒœê·¸ì‚­ì œ','')).join(' ');
		const minPay = document.getElementById("payMin").value.replace(/,/g, '').trim();
		const maxPay = document.getElementById("payMax").value.replace(/,/g, '').trim();
		const chkNegotiable = document.getElementById("chkNegotiable").checked;
		const chkUnpaid = document.getElementById("chkUnpaid").checked;

		// âœ… í•„ìˆ˜ ì…ë ¥ê°’ ê²€ì¦
		if (roleType === "") {
			swalConfirmPopup("ì—­í•  êµ¬ë¶„ì„ ì„ íƒí•´ì£¼ì„¸ìš”.");
			return;
		}

		if (genderEls.length === 0) {
			swalConfirmPopup("ì„±ë³„ì„ ì„ íƒí•´ì£¼ì„¸ìš”.");
			return;
		}

		if (age === "") {
			swalConfirmPopup("ë‚˜ì´ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.");
			return;
		}

		if (recruitCount === "") {
			swalConfirmPopup("ëª¨ì§‘ ì¸ì›ì„ ì„ íƒí•´ì£¼ì„¸ìš”.");
			return;
		}

		if (roleName === "") {
			swalConfirmPopup("ì—­í•  ì´ë¦„ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.");
			return;
		}

		if (desc === "") {
			swalConfirmPopup("ì—­í•  ì„¤ëª…ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.");
			return;
		}

		if (!chkUnpaid && !chkNegotiable && (minPay === "" || maxPay === "")) {
			swalConfirmPopup("ì¶œì—°ë£Œë¥¼ ì…ë ¥í•˜ê±°ë‚˜,<br>í˜‘ì˜/ë¬´ê¸‰ í•­ëª©ì„ ì„ íƒí•´ì£¼ì„¸ìš”.");
			return;
		}
		// =============================
		const roleSummary = document.getElementById("roleSummary");

		// ì¹´ë“œ ìƒì„±
		const li = document.createElement("li");
		li.classList.add("casting_card");
		li.innerHTML = `
			<div class="card-header">
				<span class="category">${roleType}</span>
				<span class="status"><button class="btn_action btn_del">ì‚­ì œ</button></span>
			</div>
			<div class="item_body">
				<h3 class="card-title">${genders}, ${age}ì„¸, ${recruitCount}, ${roleName}</h3>
				<p class="card-description">${desc}</p>
				<div class="sub_desc">
					${tags ? `<p class="hashtags">${tags.split(' ').map(t => `<span>${t}</span>`).join('')}</p>` : ""}
					<div class="detail_row">
						<strong class="tit">ì¶œì—°ë£Œ</strong>
						<p class="desc">
							${chkUnpaid ? "ë¬´ê¸‰" : chkNegotiable ? "í˜‘ì˜ í›„ ê²°ì •" : (minPay && maxPay ? `${Number(minPay).toLocaleString()} ~ ${Number(maxPay).toLocaleString()}ë§Œì›` : "ë¯¸ì •")}
						</p>
					</div>
				</div>
			</div>
		`;

		roleSummary.appendChild(li);

		// ì‚­ì œ ë²„íŠ¼ ì´ë²¤íŠ¸
		li.querySelector(".btn_del").addEventListener("click", () => li.remove());

		// í¼ ë¦¬ì…‹
		document.getElementById("recruitRoleForm").reset();
		document.getElementById("tagSpecialtyList").innerHTML = "";

		// ì—­í•  ì„¤ëª… ì¹´ìš´í„° ë¦¬ì…‹
		const counterEl = document.getElementById("recruitTxtCount");
		if (counterEl) counterEl.textContent = "0";
	});



	/* ============================================
	ğŸ“¸ ì´ë¯¸ì§€ ì—…ë¡œë“œ + ìë¥´ê¸° íŒì—… + ë¯¸ë¦¬ë³´ê¸° + ì„œë¸Œì‚¬ì§„ ìë™ ì¶”ê°€
	============================================ */
	document.addEventListener('DOMContentLoaded', () => {
		let currentInput = null;
		let cropper = null;

		// âœ… íŒŒì¼ ì„ íƒ ì‹œ íŒì—… ì—´ê¸°
		function openCropPopup(e) {
			currentInput = e.target;
			const file = e.target.files[0];
			if (!file) return;

			const img = document.getElementById('cropPreview');
			img.src = URL.createObjectURL(file);

			// íŒì—… ì—´ê¸°
			openPopup('pop_crop');

			// ì´ë¯¸ì§€ ë¡œë“œ í›„ cropper ìƒì„±
			img.onload = () => {
			if (cropper) cropper.destroy(); // ê¸°ì¡´ cropper ì œê±°
			cropper = new Cropper(img, {
				aspectRatio: 1, // ì •ì‚¬ê°í˜• ë¹„ìœ¨
				viewMode: 1,
				autoCropArea: 1,
				responsive: true,
				background: false
			});
			};
		}

		// âœ… "ë“±ë¡í•˜ê¸°" ë²„íŠ¼ í´ë¦­ ì‹œ ì˜ë¼ë‚´ê¸°
		function handleCroppedImage() {
			if (!cropper || !currentInput) return;

			cropper.getCroppedCanvas().toBlob(blob => {
			const croppedUrl = URL.createObjectURL(blob);
			const label = currentInput.closest('.photo');
			if (!label) return console.warn('.photo ë¶€ëª¨ ìš”ì†Œë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.');

			// ë°°ê²½ ì´ë¯¸ì§€ë¡œ ì ìš©
			label.style.backgroundImage = `url(${croppedUrl})`;
			label.style.backgroundSize = 'cover';
			label.style.backgroundPosition = 'center';
			label.classList.add('has-image');
			label.textContent = '';

			closePopup('pop_crop');
			cropper.destroy();
			cropper = null;
			currentInput = null;
			});
		}

		// âœ… ì´ë²¤íŠ¸ ì—°ê²°
		document.querySelectorAll('.photo input[type="file"]').forEach(input => {
			input.addEventListener('change', openCropPopup);
		});

		const btnCropDone = document.getElementById('btnCropDone');
		if (btnCropDone) btnCropDone.addEventListener('click', handleCroppedImage);
	});

	// ìˆ«ìë§Œ ë‚¨ê¸°ê¸° + ì²œë‹¨ìœ„ ì½¤ë§ˆ ì‚½ì…
	function formatNumber(input) {
		let value = input.value.replace(/[^0-9]/g, ""); // ìˆ«ìë§Œ ë‚¨ê¹€
		if (value) {
			value = Number(value).toLocaleString(); // ì²œë‹¨ìœ„ ì½¤ë§ˆ ì¶”ê°€
		}
		input.value = value;
	}

	document.getElementById("payMin").addEventListener("input", function() {
		formatNumber(this);
	});

	document.getElementById("payMax").addEventListener("input", function() {
		formatNumber(this);
	});
	</script>
</body>
</html>
